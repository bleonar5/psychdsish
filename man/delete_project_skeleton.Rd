% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/delete_project_skeleton.R
\name{delete_project_skeleton}
\alias{delete_project_skeleton}
\title{Delete a project skeleton while protecting the running file}
\usage{
delete_project_skeleton(
  project_root = "../",
  require_sentinel = TRUE,
  sentinel_names = c(".ok-to-prune", ".git", ".gitignore", ".here", "_project.yml",
    "_quarto.yml"),
  confirm = TRUE,
  dry_run = FALSE,
  large_n_warn = 10000
)
}
\arguments{
\item{project_root}{Path to the project folder whose contents should
be deleted. Defaults to \code{"../"}.}

\item{require_sentinel}{Logical. If \code{TRUE} (default), at least one of
the files listed in \code{sentinel_names} must exist in the project root,
otherwise the function aborts.}

\item{sentinel_names}{Character vector of sentinel filenames checked
when \code{require_sentinel = TRUE}. Defaults include \code{.ok-to-prune},
\code{.git}, \code{.here}, \verb{_project.yml}, and \verb{_quarto.yml}.}

\item{confirm}{Logical. If \code{TRUE} (default), asks the user to confirm
the deletion interactively by typing the folder name. In
non-interactive sessions this must be set to \code{FALSE} to proceed.}

\item{dry_run}{Logical. If \code{TRUE}, only reports what would be deleted
without actually deleting files. Default is \code{FALSE}.}

\item{large_n_warn}{Integer. Threshold number of items that triggers
an additional confirmation prompt. Default is \code{10000}.}
}
\value{
Invisibly returns \code{NULL} (after deleting) or a list with
estimated deletion counts when \code{dry_run = TRUE}.
}
\description{
This function deletes the contents of a project folder, but protects
the file from which it is being executed (and the minimal set of
ancestor directories required to keep that file). It is intended for
cleaning out automatically generated project skeletons while leaving
the active script or Quarto/Rmd file intact.
}
\details{
Several safety mechanisms are built in to reduce the risk of
catastrophic deletion:

\itemize{
\item Refuses to operate on filesystem roots (e.g., \code{/} or \verb{C:/}).
\item Optionally requires a sentinel file (e.g., \code{.ok-to-prune})
or other project marker in the target directory.
\item Displays an interactive confirmation prompt requiring the
exact folder name to be typed.
\item Aborts in non-interactive sessions unless \code{confirm = FALSE}
is set explicitly.
\item Supports a dry-run mode to preview deletions.
\item Issues an extra confirmation if the number of items to be
deleted is very large.
}
}
\section{Warning}{

Deletion is irreversible. Always test with \code{dry_run = TRUE} first, and
keep \code{require_sentinel = TRUE} and \code{confirm = TRUE} for normal use.
}

\examples{
\dontrun{
# Preview what would be deleted from a skeleton project
delete_project_skeleton("my_project", dry_run = TRUE)

# Actually delete (interactive confirmation required)
delete_project_skeleton("my_project")

# Non-interactive usage (e.g., in CI), requires confirm = FALSE
delete_project_skeleton("my_project", confirm = FALSE)
}
}
